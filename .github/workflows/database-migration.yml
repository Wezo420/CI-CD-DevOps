# Database migration workflow
name: Database Migration

on:
  push:
    branches: [ main, develop ]
    paths:
      - 'scripts/01_security_dashboard_schema.sql'
      - '.github/workflows/database-migration.yml'

jobs:
  migrate:
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      
      - name: Run database migration
        env:
          DATABASE_URL: ${{ secrets.DATABASE_URL }}
        run: |
          echo "Running database schema migration..."
          # Migration script will be run manually via the v0 scripts folder
          echo "Ensure schema is up-to-date before proceeding"
